{% extends "layout.html" %}


{% block title %}All references{% endblock %}
{% block content %}
<h1>All references</h1>

{% if references %}
    <form action="/references" method="GET">
        <label for="sort-by">Sort by</label>
        <select id="sort-by" name="sort-by">
            <option value="author">Author</option>
            <option value="title">Title</option>
            <option value="year">Year</option>
        </select>

        <label for="direction">Direction</label>
        <select id="direction" name="direction">
            <option value="asc">Ascending ↑</option>
            <option value="desc">Descending ↓</option>
        </select>

        <button type="submit">Apply</button>
    </form>

    <ol class="references">
        {% for reference in references %}
        <li class="ref_item"><a id="ref_link" href="/show_reference/{{reference.id}}">
            [{{ loop.index }}]
            {% if reference.ref_type == "article" %}
                {{ reference.author }}.
                {{ reference.title }}.
                <em>{{ reference.journal }}</em>
                {% if reference.volume %}, {{ reference.volume }}{% endif %}
                {% if reference.pages %}, {{ reference.pages }}{% endif %},
                {{ reference.year }}.
                
            {% elif reference.ref_type == "book" %}
                {{ reference.author }}.
                <em>{{ reference.title }}</em>.
                {% if reference.publisher %} {{ reference.publisher }} {% endif %},
                {{ reference.year }}.
        
            {% elif reference.ref_type == "inproceedings" %}
                {{ reference.author }}.
                {{ reference.title }}.
                In <em>{{ reference.booktitle }}</em>,
                {{ reference.year }}.

            {% else %}
                {{ reference.author }}.
                <em>{{ reference.title }}</em>,
                {{ reference.year }}.
            {% endif %}
        </a></li>
        {% endfor %}
        <a href="/bibtex">Generate BibTeX file</a>
    </ol>

{% else %}
    <p>No references found yet</p>
{% endif %}

{% endblock %}